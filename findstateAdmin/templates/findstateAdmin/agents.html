{% extends 'findstateAdmin/_base.html' %}
{% load static %}
{% block title %}Agents{% endblock title %}



{% block css %}
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'css/open-iconic-bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/aos.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.timepicker.css' %}">
    
    
    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">         
{% endblock css %}
    


{% block content %}
<!-- <section class="hero-wrap hero-wrap-2 ftco-degree-bg js-fullheight"
    style="background-image: url('../static/images/bg_1.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="overlay-2"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-center">
            <div class="col-md-9 ftco-animate pb-5 mb-5 text-center">
                <h1 class="mb-3 bread">Agents</h1>
                <p class="breadcrumbs"><span class="mr-2"><a href="{% url 'app:home' %}">Home <i
                                class="ion-ios-arrow-forward"></i></a></span> <span>Agents <i
                            class="ion-ios-arrow-forward"></i></span>
                </p>
            </div>
        </div>
    </div>
</section> -->

<section class="ftco-section ftco-agent">
    <div class="container">
        <div class="row" id="agentsContainer">

        </div>
    </div>
</section>
{% endblock content %}

{% block javascript %}
<script>
    const agentsContainer = document.getElementById("agentsContainer");

    const getAgents = async () => {
        const response = await fetch('http://localhost:8000/api/v1/agents/');
        const agents = await response.json();

        for (let i = 0; i < agents.length; i++) {
            let agent = agents[i];

            let row = `<div class="col-md-3">
        <div class="agent">
          <div class="img">
            <img src="${agent.image}" class="img-fluid" alt="Colorlib Template">
          </div>
          <div class="desc">
            <h3><a href="{% url 'app:properties' %}">${agent.name}</a></h3>
            <p class="h-info"><span class="ion-ios-filing icon"></span> <span class="details">${agent.properties.length} Properties</span></p>
          </div>
        </div>
      </div>`

            agentsContainer.innerHTML += row;
        }
    }

    getAgents();
</script>
{% endblock javascript %}